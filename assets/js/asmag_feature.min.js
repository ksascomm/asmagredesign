var $z=jQuery.noConflict();!function($z){$z.fn.epicZoom=function(options){var body_el=$z("body"),methods={isInBounds:function(event,offset,size,padding){return!(event.pageX<offset.left+padding.left||event.pageX>offset.left+size.width+padding.left||event.pageY<offset.top+padding.top||event.pageY>offset.top+size.height+padding.top)},isDebug:function(){return!(!options.debug||"undefined"==typeof console)}},defaults={size:150,border:"1px solid white",largeImage:"",magnification:1,hideCursor:!0,blankCursor:"http://krieger.jhu.edu/magazine/wp-content/themes/asmagredesign/assets/js/blank.png",debug:!1};return options=$z.extend(defaults,options),options.debug=Boolean(options.debug),methods.isDebug()&&console.warn("Epic Image Zoom debugging is enabled."),options.size=parseInt(options.size,10),options.magnification=parseFloat(options.magnification),options.hideCursor=Boolean(options.hideCursor),options.largeImage=$z.trim(options.largeImage),options.blankCursor=$z.trim(options.blankCursor),methods.isDebug()&&console.log("EIZ; options: ",options),this.each(function(){var img=$z(this);if(!img.is("img"))return methods.isDebug()&&console.error("EIZ works only on img elements."),this;var preloadImg=$z("<img />");options.largeImage?preloadImg.attr("src",options.largeImage):preloadImg.attr("src",img.attr("src")),preloadImg.load(function(){if(preloadImg.hasInit)return!1;preloadImg.hasInit=!0,"undefined"==typeof body_el.data("epicZoom-nb")&&body_el.data("epicZoom-nb",0),body_el.data("epicZoom-nb",body_el.data("epicZoom-nb")+1);var eiz_nb=body_el.data("epicZoom-nb");methods.isDebug()&&console.log("EIZ; #",eiz_nb),img.wrap('<span id="eiz-'+eiz_nb+'" class="eiz-container"></span>');var container=$z("#eiz-"+eiz_nb).css("margin",0).css("padding",0).css("border",0);container.append('<span class="eiz-magnifier"></span>');var magnifier=$z(".eiz-magnifier",container).css("position","absolute").css("margin",0).css("padding",0).css("border",options.border).css("-moz-box-shadow","0 0 5px #777, 0 0 10px #aaa inset").css("-webkit-box-shadow","0 0 5px #777").css("box-shadow","0 0 5px #777, 0 0 10px #aaa inset").css("overflow","hidden").css("z-index",20).css("width",options.size+"px").css("height",options.size+"px");magnifier.append('<div><img alt="" title="" /></div>');var magnifierImg2=$z("img",magnifier).css("margin",0).css("padding",0).css("border",0);options.largeImage?magnifierImg2.attr("src",options.largeImage):magnifierImg2.attr("src",img.attr("src")),options.hideCursor&&magnifierImg2.css("cursor","none").css("cursor","url("+options.blankCursor+"),none !important;");var magnifierImg=$z("div",magnifier).css("position","absolute").css("margin",0).css("padding",0).css("border",0).css("z-index",1).css("overflow","hidden");magnifierImg2.width(magnifierImg2.width()*options.magnification);var ratio=magnifierImg2.width()/img.width(),offset={left:img.offset().left,top:img.offset().top},size={width:img.width(),height:img.height()},padding={top:parseInt(img.css("padding-top"),10),right:parseInt(img.css("padding-right"),10),bottom:parseInt(img.css("padding-bottom"),10),left:parseInt(img.css("padding-left"),10)};magnifier.hide(),$z(window).resize(function(){offset={left:img.offset().left,top:img.offset().top},size={width:img.width(),height:img.height()},methods.isDebug()&&console.log("EIZ #"+eiz_nb+": window resized, vars recalculated")}),container.mousemove(function(event){return methods.isInBounds(event,offset,size,padding)?(magnifier.is(":not(:animated):hidden")&&container.trigger("mouseenter"),magnifier.css("left",event.pageX-options.size/2),magnifier.css("top",event.pageY-options.size/2),magnifierImg.css("left",-1*(event.pageX-offset.left-padding.left)*ratio+options.size/2),void magnifierImg.css("top",-1*(event.pageY-offset.top-padding.top)*ratio+options.size/2)):(magnifier.is(":animated")||(methods.isDebug()&&console.log("EIZ #"+eiz_nb+": out of bounds"),container.trigger("mouseleave")),!1)}).mouseleave(function(){magnifier.stop(!0,!0).hide()}).mouseenter(function(event){return methods.isDebug()&&console.log("EIZ #"+eiz_nb+": mouse enter container"),!!methods.isInBounds(event,offset,size,padding)&&void magnifier.stop(!0,!0).show()})}),(preloadImg.complete||preloadImg.naturalWidth>0)&&preloadImg.trigger("load")})}}(jQuery),function($){function escapeSelector(str){return str.replace(/(:|\.)/g,"\\$1")}var version="1.4.4",defaults={exclude:[],excludeWithin:[],offset:0,direction:"top",scrollElement:null,scrollTarget:null,beforeScroll:function(){},afterScroll:function(){},easing:"swing",speed:400,autoCoefficent:2},getScrollable=function(opts){var scrollable=[],scrolled=!1,dir=opts.dir&&"left"==opts.dir?"scrollLeft":"scrollTop";return this.each(function(){if(this!=document&&this!=window){var el=$(this);return el[dir]()>0?void scrollable.push(this):(el[dir](1),scrolled=el[dir]()>0,el[dir](0),scrolled?void scrollable.push(this):void 0)}}),"first"===opts.el&&scrollable.length&&(scrollable=[scrollable.shift()]),scrollable},isTouch="ontouchend"in document;$.fn.extend({scrollable:function(dir){var scrl=getScrollable.call(this,{dir:dir});return this.pushStack(scrl)},firstScrollable:function(dir){var scrl=getScrollable.call(this,{el:"first",dir:dir});return this.pushStack(scrl)},smoothScroll:function(options){options=options||{};var opts=$.extend({},$.fn.smoothScroll.defaults,options),locationPath=$.smoothScroll.filterPath(location.pathname);return this.die("click.smoothscroll").live("click.smoothscroll",function(event){var clickOpts={},link=this,$link=$(this),hostMatch=location.hostname===link.hostname||!link.hostname,pathMatch=opts.scrollTarget||($.smoothScroll.filterPath(link.pathname)||locationPath)===locationPath,thisHash=escapeSelector(link.hash),include=!0;if(opts.scrollTarget||hostMatch&&pathMatch&&thisHash){for(var exclude=opts.exclude,elCounter=0,el=exclude.length;include&&elCounter<el;)$link.is(escapeSelector(exclude[elCounter++]))&&(include=!1);for(var excludeWithin=opts.excludeWithin,ewlCounter=0,ewl=excludeWithin.length;include&&ewlCounter<ewl;)$link.closest(excludeWithin[ewlCounter++]).length&&(include=!1)}else include=!1;include&&(event.preventDefault(),$.extend(clickOpts,opts,{scrollTarget:opts.scrollTarget||thisHash,link:link}),$.smoothScroll(clickOpts))}),this}}),$.smoothScroll=function(options,px){var opts,$scroller,scrollTargetOffset,speed,scrollerOffset=0,offPos="offset",scrollDir="scrollTop",aniprops={},useScrollTo=!1,scrollprops=[];"number"==typeof options?(opts=$.fn.smoothScroll.defaults,scrollTargetOffset=options):(opts=$.extend({},$.fn.smoothScroll.defaults,options||{}),opts.scrollElement&&(offPos="position","static"==opts.scrollElement.css("position")&&opts.scrollElement.css("position","relative")),scrollTargetOffset=px||$(opts.scrollTarget)[offPos]()&&$(opts.scrollTarget)[offPos]()[opts.direction]||0),opts=$.extend({link:null},opts),scrollDir="left"==opts.direction?"scrollLeft":scrollDir,opts.scrollElement?($scroller=opts.scrollElement,scrollerOffset=$scroller[scrollDir]()):($scroller=$("html, body").firstScrollable(),useScrollTo=isTouch&&"scrollTo"in window),aniprops[scrollDir]=scrollTargetOffset+scrollerOffset+opts.offset,opts.beforeScroll.call($scroller,opts),useScrollTo?(scrollprops="left"==opts.direction?[aniprops[scrollDir],0]:[0,aniprops[scrollDir]],window.scrollTo.apply(window,scrollprops),opts.afterScroll.call(opts.link,opts)):(speed=opts.speed,"auto"===speed&&(speed=aniprops[scrollDir]||$scroller.scrollTop(),speed/=opts.autoCoefficent),$scroller.animate(aniprops,{duration:speed,easing:opts.easing,complete:function(){opts.afterScroll.call(opts.link,opts)}}))},$.smoothScroll.version=version,$.smoothScroll.filterPath=function(string){return string.replace(/^\//,"").replace(/(index|default).[a-zA-Z]{3,4}$/,"").replace(/\/$/,"")},$.fn.smoothScroll.defaults=defaults}(jQuery);var $p=jQuery.noConflict();$p("a").smoothScroll({excludeWithin:[".comments",".dropdown"]});var $j=jQuery.noConflict();$j(document).ready(function(){$j(".wysiwyg-read-more-link").toggle(function(){$j(this).text("Read Less").stop(),$j(this).css({"background-position":"0px 0px"}),$j(this).parents(".wysiwyg-more-less").find(".wysiwyg-more-less-toggle").show()},function(){$j(this).text("Read More").stop(),$j(this).css({"background-position":"0px -25px"}),$j(this).parents(".wysiwyg-more-less").find(".wysiwyg-more-less-toggle").hide()})});